{"version":3,"sources":["contact.js"],"names":["express","require","router","Router","Post","req","res","next","render","post","firstname","body","lastname","email","err","save","errorArray","errorKeys","Object","keys","errors","key","message","forEach","get","data","params","email1","findOne","userdat","console","log"],"mappings":"aAAA,IAAIA,QAAUC,QAAQ,WAClBC,OAASF,QAAQG,SADjBH,KAAOC,QAAU,sBAArBG,KACAF,OAAIA,IAAM,IAAGF,SAAAK,EAAbC,EAAAC,GACMH,EAAII,OAAGP,aAKVC,OAEHO,KAAA,IAAA,SAAAJ,EAAAC,EAAAC,GACAL,IAAOO,EAAP,IAAiBL,KACfK,EAAAC,UAAAL,EAAAM,KAAAD,UACAD,EAAMA,SAAWL,EAAJO,KAAbC,SACAH,EAAKC,MAAAA,EAALC,KAAqBA,MACrBF,EAAKG,QAALP,EAAeA,KAAIM,QACnBF,EAAKI,KAAL,SAAAC,GAEAL,GAAKM,EAAK,CAER,IAAAC,EAAS,GAIPC,OAFmBC,OAAnBC,KAAAL,EAAAM,QACMH,QAAYC,SAAAA,GAAAA,OAAOC,EAASC,KAAlCN,EAAAM,OAAAC,GAAAC,WACAL,EAAUM,OAAQ,UAAAF,CAAGD,OAAIJ,IAEvBI,EAAAA,SAAQJ,iBAIbd,OAZDsB,IAAA,WAAA,SAAAnB,EAAAC,EAAAC,GAPF,IAsBAkB,EAAApB,EAAAqB,OAAAC,OAGEvB,KAAKwB,QAAQ,CAAEf,MAAOY,GAAQ,SAACX,EAAKL,GAFtCP,EAAOsB,OAAI,YAAY,CAAAK,QAAApB,IACrBqB,QAAUC,IAAMtB,EAACiB,aAEUG,OAAAA,QAAQpB","file":"contact.min.js","sourcesContent":["var express = require('express');\r\nvar router = express.Router();\r\nconst Post = require('../models/userdata').Post;\r\n\r\n router.get('/', function (req, res, next) {\r\n  \r\n    res.render('contact');\r\n  });\r\n\r\n// To create a new database entry\r\nrouter.post('/', function (req, res, next) {\r\n  // const post = new Post(req.body);\r\n  const post = new Post();\r\n  post.firstname = req.body.firstname\r\n  post.lastname= req.body.lastname\r\n  post.email= req.body.email\r\n  post.comment= req.body.comment\r\n  post.save(err => {\r\n    // if(err) throw err;\r\n    if (err) {\r\n     \r\n      const errorArray = [];\r\n      const errorKeys = Object.keys(err.errors);\r\n      errorKeys.forEach(key => errorArray.push(err.errors[key].message));\r\n      return res.render(\"contact\", {\r\n        errors: errorArray\r\n      });\r\n    }\r\n    res.redirect(\"/thankyou\");\r\n  });\r\n});\r\n\r\n// Shows a single post\r\nrouter.get('/:email1', function (req, res, next) {\r\n  const data = req.params.email1;\r\n  Post.findOne({ email: data }, (err, post) => {\r\n   res.render('user-data', { userdat:post });\r\n    console.log(post.comment);\r\n    //console.log(userdat);\r\n  });\r\n});\r\n\r\nmodule.exports = router;"]}